# 4. Core Components

## 4.1 AI-Powered Proposal Analysis System

The heart of AI-G-DAO is our comprehensive AI analysis system that evaluates climate proposals using Google Gemini 1.5 Flash to provide scientific, unbiased assessment of environmental projects.

### 4.1.1 Analysis Engine (`lib/gemini.ts`)

#### Core Functionality
```typescript
interface AIReviewResult {
  overallScore: number;                    // 0-100 comprehensive rating
  environmentalImpact: EnvironmentalAnalysis;
  feasibility: FeasibilityAnalysis;
  risks: RiskAnalysis;
  implementationRoadmap: ImplementationPlan;
  recommendations: string[];
  category: string;
}
```

#### Analysis Dimensions

**Environmental Impact Assessment**
- **Carbon Footprint Analysis**: Quantitative CO2 reduction potential
- **Biodiversity Impact**: Effects on local ecosystems and wildlife
- **Resource Efficiency**: Water, energy, and material usage optimization
- **Scalability Potential**: Global applicability and expansion possibilities
- **Scientific Validity**: Evidence-based impact projections

**Feasibility Analysis**
- **Technical Feasibility**: Technology readiness and implementation complexity
- **Economic Viability**: Cost-benefit analysis and financial sustainability
- **Resource Requirements**: Personnel, equipment, and infrastructure needs
- **Timeline Realism**: Project duration and milestone achievability
- **Regulatory Compliance**: Legal and regulatory considerations

**Risk Assessment**
- **Implementation Risks**: Technical, operational, and logistical challenges
- **Environmental Risks**: Potential negative environmental consequences
- **Financial Risks**: Budget overruns and funding sustainability
- **Social Risks**: Community acceptance and stakeholder alignment
- **Mitigation Strategies**: Recommended risk reduction approaches

### 4.1.2 AI Integration Hook (`hooks/use-ai-review.ts`)

#### State Management
```typescript
interface AIReviewState {
  isAnalyzing: boolean;
  result: AIReviewResult | null;
  error: string | null;
  retryCount: number;
}
```

#### Features
- **Real-time Analysis**: Instant proposal evaluation during submission
- **Error Handling**: Graceful degradation with retry mechanisms
- **Loading States**: User-friendly analysis progress indication
- **Result Caching**: Efficient re-use of analysis results

### 4.1.3 Analysis Display Component (`components/ai-review-display.tsx`)

#### Visualization Features
- **Score Visualization**: Color-coded progress bars and numerical ratings
- **Category Breakdown**: Detailed analysis across all evaluation dimensions
- **Recommendation Cards**: Actionable improvement suggestions
- **Implementation Timeline**: Visual roadmap with phases and milestones
- **Risk Matrix**: Clear presentation of identified risks and mitigations

## 4.2 Algorand Blockchain Integration

### 4.2.1 Blockchain Client (`lib/algorand.ts`)

#### Network Configuration
```typescript
export const algorandClient = algosdk.makeAlgodClient(
  'https://testnet-api.algonode.cloud',
  '',
  443
);

export const CONTRACT_IDS = {
  CLIMATE_DAO: 744174033,              // Live TestNet deployment
  GOVERNANCE: 'governance-contract-id',
  CREDITS: 'credits-contract-id'
};
```

#### Core Functions
- **Network Connectivity**: Reliable connection to Algorand TestNet with live contract deployment
- **Transaction Management**: Streamlined transaction creation and submission with 0.001 ALGO fees
- **Contract Interaction**: Direct smart contract communication with deployed contract (ID: 744174033)
- **Account Management**: Pera Wallet integration and account utilities
- **Transaction Tracking**: Complete transaction history with Lora Explorer integration

### 4.2.2 Smart Contract System

#### Climate DAO Contract (`smart_contracts/climate_dao/`)
```python
# Core contract functionality
class ClimateDAOContract:
    def propose_project(self, proposer: Account, proposal_data: bytes) -> None:
        # Submit new climate project proposal
        
    def vote_on_proposal(self, voter: Account, proposal_id: int, vote: bool) -> None:
        # Cast vote on active proposal
        
    def execute_proposal(self, proposal_id: int) -> None:
        # Execute approved proposal
        
    def distribute_credits(self, recipient: Account, amount: int) -> None:
        # Distribute Climate Impact Credits
```

#### Contract Features
- **Proposal Management**: Create, store, and manage climate project proposals with on-chain data
- **Real-Time Voting System**: Democratic voting with live blockchain transactions (0.001 ALGO fee)
- **Duplicate Vote Prevention**: Built-in safeguards against double voting
- **Transaction Tracking**: Complete transaction history with viewable IDs on Lora Explorer
- **Automatic Execution**: Smart contract automation for approved proposals
- **Credit Distribution**: Algorithmic allocation of Climate Impact Credits

### 4.2.3 Wallet Integration (`hooks/use-wallet.tsx`)

#### Wallet Management
```typescript
interface WalletState {
  isConnected: boolean;
  accounts: string[];
  activeAccount: string | null;
  provider: BaseWalletProvider | null;
  balance: number;
  transactionHistory: Transaction[];
}
```

#### Supported Wallets
- **Pera Wallet**: Primary Algorand wallet integration with seamless connection
- **Defly Wallet**: Alternative wallet provider support
- **WalletConnect**: Cross-platform wallet connectivity
- **MyAlgo**: Desktop wallet integration

#### Wallet Features
- **Real-Time Balance**: Live ALGO balance updates
- **Transaction History**: Complete transaction record with explorer links
- **Connection State Management**: Persistent wallet connection across sessions
- **Multi-Account Support**: Support for multiple wallet accounts

## 4.3 Climate Impact Credits (CIC) System

### 4.3.1 Credit Token Properties

#### Token Characteristics
- **Symbol**: CIC (Climate Impact Credits)
- **Network**: Algorand (carbon-negative blockchain)
- **Supply**: Dynamic based on verified environmental impact
- **Decimals**: 6 (Algorand standard)
- **Transferability**: Fully transferable and tradeable

#### Earning Mechanisms
- **Project Completion**: Credits awarded for successful climate project implementation
- **Governance Participation**: Rewards for active DAO participation
- **Impact Verification**: Bonus credits for verified environmental outcomes
- **Community Contributions**: Credits for platform development and maintenance

### 4.3.2 Credit Calculation Algorithm

#### Impact Measurement
```typescript
interface ImpactMetrics {
  carbonReduction: number;        // CO2 equivalent reduction (tons)
  biodiversityScore: number;      // Ecosystem impact rating (0-100)
  resourceEfficiency: number;     // Resource optimization percentage
  scalabilityFactor: number;      // Global applicability multiplier
  verificationLevel: number;      // Third-party validation score
}
```

#### Credit Formula
```
CIC_Amount = (Carbon_Reduction × 10) + 
            (Biodiversity_Score × 0.5) + 
            (Resource_Efficiency × 0.3) + 
            (Scalability_Factor × Carbon_Reduction × 0.2) + 
            (Verification_Bonus)
```

## 4.4 Governance System

### 4.4.1 DAO Governance Hook (`hooks/use-climate-dao.ts`)

#### Governance Functions
```typescript
interface GovernanceActions {
  submitProposal: (proposal: ProposalData) => Promise<string>;
  voteOnProposal: (proposalId: number, vote: 'for' | 'against') => Promise<TransactionResult>;
  getActiveProposals: () => Promise<Proposal[]>;
  getProposalDetails: (id: number) => Promise<ProposalDetails>;
  getUserVotingState: (proposalId: number) => Promise<VotingState>;
  getUserVotingHistory: () => Promise<VoteRecord[]>;
}
```

#### Voting System
- **Real-Time Voting**: Live blockchain voting with immediate transaction confirmation
- **Transparent Process**: All votes recorded on-chain with viewable transaction IDs
- **Duplicate Prevention**: Smart contract enforcement against double voting
- **Transaction Costs**: Transparent 0.001 ALGO fee per vote
- **Voting History**: Complete user voting history with transaction tracking
- **Lora Explorer Integration**: Direct links to view transactions on blockchain explorer

### 4.4.2 Proposal Lifecycle

#### Proposal States
1. **Draft**: Initial proposal creation and AI analysis
2. **Under Review**: Community review period with AI insights available
3. **Active Voting**: Democratic voting period
4. **Approved/Rejected**: Final community decision
5. **Implementation**: Execution of approved proposals
6. **Completed**: Project completion and impact verification

#### Transition Triggers
- **Automatic Progression**: Time-based state transitions
- **Community Triggers**: Vote-based state changes
- **Admin Actions**: Emergency governance interventions
- **Smart Contract Automation**: Algorithmic proposal management

## 4.5 User Interface Components

### 4.5.1 Core UI Components (`components/ui/`)

#### Design System
- **Color Scheme**: Yellow/amber primary with dark mode support
- **Typography**: Inter font family with responsive scaling
- **Spacing**: Tailwind CSS spacing scale (4px base unit)
- **Accessibility**: WCAG 2.1 AA compliance through Radix UI
- **Animations**: Subtle micro-interactions and loading states

#### Key Components
- **Button**: Accessible button component with various styles and states
- **Cards**: Elevated surfaces for content organization with consistent styling
- **Forms**: Accessible form controls with real-time validation
- **Badge**: Status indicators for proposals and voting states
- **Toast**: Transaction notifications and status updates
- **Dialog**: Modal interfaces for voting confirmations and transactions
- **Charts**: Data visualization for analytics and metrics

### 4.5.2 Page Components

#### Landing Page (`components/landing-page.tsx`)
- **Hero Section**: Compelling introduction with animated call-to-action
- **Feature Overview**: Key platform capabilities with real implementation highlights
- **Process Flow**: Step-by-step user journey from wallet connection to voting
- **Live Statistics**: Real-time platform metrics and activity
- **Call-to-Action**: Direct navigation to voting and proposal submission

#### Dashboard (`components/dashboard-page.tsx`)
- **Wallet Status**: Connection state and real-time ALGO balance
- **Active Proposals**: Current voting opportunities with AI analysis preview
- **Voting History**: Personal voting record with transaction links
- **Impact Metrics**: Personal and community environmental impact tracking
- **Quick Actions**: Fast access to voting, proposal submission, and guidelines

#### Vote Page (`app/vote/page.tsx`)
- **Real-Time Voting Interface**: Live blockchain voting with immediate feedback
- **Proposal Sorting**: Latest proposals displayed first for current engagement
- **AI Analysis Display**: Comprehensive AI insights for informed voting
- **Transaction Tracking**: Real-time transaction status and history
- **Vote Confirmation**: Secure voting confirmation with transaction details
- **Duplicate Prevention**: Warning system for already voted proposals

#### Proposal Submission (`components/submit-proposal.tsx`)
- **Enhanced Form**: Comprehensive proposal creation with validation
- **AI Analysis Integration**: Real-time analysis feedback during submission
- **Validation System**: Multi-level input validation and error handling
- **Preview Mode**: Complete proposal review before final submission
- **Guidelines Integration**: Easy access to submission guidelines

#### Transaction Components
- **Transaction Notification**: Real-time transaction status notifications
- **Voting History**: Complete user voting history with blockchain verification
- **Transaction History**: Detailed transaction records with explorer links
- **User Proposals Tracker**: Status tracking for submitted proposals

## 4.6 Integration Architecture

### 4.6.1 External Service Integration

#### Google Gemini API
- **Authentication**: Secure API key management
- **Request Optimization**: Efficient prompt engineering
- **Response Validation**: Structured output verification
- **Error Handling**: Graceful degradation and retry logic

#### Algorand Network
- **Node Selection**: Reliable Algorand TestNet node connectivity with live deployment
- **Transaction Monitoring**: Real-time transaction status tracking with confirmation states
- **Network Configuration**: TestNet deployment with MainNet migration readiness
- **Fee Management**: Predictable transaction costs (0.001 ALGO for votes)
- **Explorer Integration**: Direct Lora Explorer links for transaction verification
- **Smart Contract Integration**: Live interaction with deployed contract (ID: 744174033)

### 4.6.2 Internal Component Communication

#### State Management Patterns
- **Context Providers**: Global state for wallet and DAO connections
- **Custom Hooks**: Reusable logic for common operations
- **Event Handling**: Consistent patterns for user interactions
- **Error Boundaries**: Graceful error handling and recovery

This comprehensive component architecture ensures a robust, scalable, and user-friendly platform that effectively combines AI analysis with blockchain governance to drive meaningful climate action.